<!--
 *  Copyright (c) 2014 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<!DOCTYPE html>
<html>
<head>
<title>WebRTC Reference App</title>

<meta http-equiv="X-UA-Compatible" content="chrome=1"/>
{{ meta_viewport }}

<link rel="canonical" href="{{ room_link }}"/>
<link rel="stylesheet" href="css/main.css" />

<script type="text/javascript" src="/_ah/channel/jsapi"></script>
<script src="/js/main.js"></script>
{{ include_vr_js }}
<!-- Load the polyfill to switch-hit between Chrome and Firefox -->
<script src="/js/adapter.js"></script>

</head>
<body>
<script type="text/javascript">
  var errorMessages = {{ error_messages }};
  var channelToken = '{{ token }}';
  var me = '{{ me }}';
  var roomKey = '{{ room_key }}';
  var roomLink = '{{ room_link }}';
  var initiator = {{ initiator }};
  var pcConfig = {{ pc_config | safe }};
  var pcConstraints = {{ pc_constraints | safe }};
  var offerConstraints = {{ offer_constraints | safe }};
  var mediaConstraints = {{ media_constraints | safe }};
  var turnUrl = '{{ turn_url }}';
  var stereo = {{ stereo }};
  var opusfec = {{ opusfec }};
  var opusMaxPbr = '{{ opusmaxpbr }}';
  var audioSendBitrate = '{{ asbr }}';
  var audioRecvBitrate = '{{ arbr }}';
  var videoSendBitrate = '{{ vsbr }}';
  var videoRecvBitrate = '{{ vrbr }}';
  var videoSendInitialBitrate = '{{ vsibr }}';
  var stereoscopic = '{{ ssr }}';
  var audioSendCodec = '{{ audio_send_codec }}';
  var audioRecvCodec = '{{ audio_receive_codec }}';
  setTimeout(initialize, 1);
</script>
<div id="container" ondblclick="enterFullScreen()" ontouchend="enterFullScreen()">
  <div id="card">
    <div id="local">
      <video id="localVideo" autoplay="autoplay" muted="true"/>
    </div>
    <div id="remote">
      <!-- Remote video is displayed in the canvas below when stereoscopic
           rendering is requested (&ssr=true). -->
      <canvas id="remoteCanvas" style="display: none;"></canvas>
      <video id="remoteVideo" autoplay="autoplay">
      </video>
      <div id="mini">
        <video id="miniVideo" autoplay="autoplay" muted="true"/>
      </div>
    </div>
  </div>
</div>
</body>
<footer id="status">
</footer>
<div id="infoDiv"></div>
</html>
