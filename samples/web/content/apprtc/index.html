<!DOCTYPE html>
<!--
 *  Copyright (c) 2014 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<html>

<head>

  <title>WebRTC Reference App</title>

  <meta charset="utf-8">
  <meta name="description" content="WebRTC reference app">
  {{ meta_viewport }}
  <link rel="canonical" href="{{ room_link }}">
  <link rel="stylesheet" href="css/main.css">

</head>

<body>

  <div id="videos">
    <video id="mini-video" autoplay muted></video>
    <canvas id="remote-canvas"></canvas>
    <video id="remote-video" autoplay></video>
    <video id="local-video" autoplay muted></video>
  </div>

  <footer>
    <div id="sharing">
      <div id="room-link">Waiting for someone to join this room: <a href="{{ room_link }}" target="_blank">{{ room_link }}</a></div>
    </div>
    <div id="info"></div>
    <div id="status"></div>
  </footer>

  <script type="text/javascript" src="/_ah/channel/jsapi"></script>
  <script src="/js/stats.js"></script>
  <script src="/js/signaling.js"></script>
  <script src="/js/infobox.js"></script>
  <script src="/js/util.js"></script>
  <script src="/js/main.js"></script>
  {{ include_vr_js }}
  <script src="/js/adapter.js"></script>

  <script type="text/javascript">
    var params = {
      errorMessages: {{ error_messages }},
      channelToken: '{{ token }}',

      roomId: '{{ room_key }}',
      roomLink: '{{ room_link }}',
      clientId: '{{ me }}',
      isInitiator: {{ initiator }},

      mediaConstraints: {{ media_constraints | safe }},
      offerConstraints: {{ offer_constraints | safe }},
      peerConnectionConfig: {{ pc_config | safe }},
      peerConnectionConstraints: {{ pc_constraints | safe }},
      turnRequestUrl: '{{ turn_url }}',

      audioSendBitrate: '{{ asbr }}',
      audioSendCodec: '{{ audio_send_codec }}',
      audioRecvBitrate: '{{ arbr }}',
      audioRecvCodec: '{{ audio_receive_codec }}',
      opusMaxPbr: '{{ opusmaxpbr }}',
      isStereoscopic: '{{ ssr }}',
      isOpus: {{ opusfec }},
      isOpusStereo: {{ stereo }},
      videoSendBitrate: '{{ vsbr }}',
      videoSendInitialBitrate: '{{ vsibr }}',
      videoRecvBitrate: '{{ vrbr }}',
    };
    setTimeout(initialize, 1);
  </script>

  <script src="/js/lib/ga.js"></script>

</body>
</html>
